!function(t){"use strict";var e=["activate","beforeStop","change","create","deactivate","out","over","receive","remove","sort","start","stop","update"];Object.freeze(e);var i={init:function(e){var i=t.extend({container:"sortable",selectedClass:"multiple-sortable-selected",orientation:"vertical",keepSelection:!0,click:function(t){}},e);return this.each(function(){var e=t(this),s=new o(e,i).sortable(),r=i.cancel?n(i.items,i.cancel):i.items;e.on("click",r,function(t){s.click(t)}).data("plugin_multipleSortable",s).disableSelection()})}},n=function(t,e){return t+':not("'+e+'")'},s=function(t,e){var i=0;return t.each(function(t,n){i+=e(n)}),i};t.fn.multipleSortable=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.multipleSortable"):i.init.apply(this,arguments)};var o=function(){var i=function(t,e){this.$el=t,this.settings=e};return t.extend(i.prototype,{sortable:function(){var i=this,n={};return e.forEach(function(t){n[t]=function(e,n){if(i[t]&&i[t](e,n),i.settings[t]){var s=i.getSharedObjectOf(n.item).$draggingItems;i.settings[t](e,n,s)}}}),this.$el.sortable(t.extend(!0,{},this.settings,n)),this},click:function(e){this.toggleSelected(t(e.currentTarget)),this.settings.click(e)},sort:function(t,e){var i=this.partition(this.getSharedObjectOf(e.item).$draggingItems,e.item);this["sort_"+this.settings.orientation](e.item,i.prev,i.following)},start:function(t,e){e.item.addClass(this.settings.selectedClass);var i=this.$containerOf(e.item).find("."+this.settings.selectedClass+':not(".ui-sortable-placeholder")');this.setSharedObjectOf(e.item,{$draggingItems:i}),this["adjustSize_"+this.settings.orientation](e)},stop:function(t,e){var i=e.item;this.changePosition(this.getSharedObjectOf(e.item).$draggingItems,"","","","");var n=this.partition(this.getSharedObjectOf(e.item).$draggingItems,i);i.before(n.prev).after(n.following),this.settings.keepSelection||this.getSharedObjectOf(e.item).$draggingItems.removeClass(this.settings.selectedClass)},getSharedObjectOf:function(t){return this.$containerOf(t).data("plugin_multipleSortable_share")||{}},setSharedObjectOf:function(t,e){return this.$containerOf(t).data("plugin_multipleSortable_share",e)},toggleSelected:function(t){this.isSelecting(t)?t.removeClass(this.settings.selectedClass):t.addClass(this.settings.selectedClass)},$containerOf:function(e){return"sortable"===this.settings.container?this.$el:"parent"===this.settings.container?e.parent():this.settings.container instanceof jQuery?this.settings.container:"function"==typeof this.settings.container?this.settings.container(e):t(this.settings.container)},isSelecting:function(t){return t.hasClass(this.settings.selectedClass)},adjustSize_vertical:function(e){var i=s(this.getSharedObjectOf(e.item).$draggingItems,function(e){return t(e).outerHeight()});e.placeholder.height(i)},adjustSize_horizontal:function(e){var i=s(this.getSharedObjectOf(e.item).$draggingItems,function(e){return t(e).outerWidth()});e.placeholder.width(i)},sort_vertical:function(e,i,n){var s=e.position(),o=0,r=this.sortableOption("zIndex"),a=this;i.get().reverse().forEach(function(e){var i=t(e);o+=i.outerHeight(),a.changePosition(i,s.top-o,s.left,"absolute",r)}),o=e.outerHeight(),n.each(function(e,i){var n=t(i);a.changePosition(n,s.top+o,s.left,"absolute",r),o+=n.outerHeight()})},sort_horizontal:function(e,i,n){var s=e.position(),o=0,r=this.sortableOption("zIndex"),a=this;i.get().reverse().forEach(function(e){var i=t(e);o+=i.outerWidth(),a.changePosition(i,s.top,s.left-o,"absolute",r)}),o=e.outerWidth(),n.each(function(e,i){var n=t(i);a.changePosition(n,s.top,s.left+o,"absolute",r),o+=n.outerWidth()})},sortableOption:function(t){return this.$el.sortable("option",t)},partition:function(t,e){var i=t.index(e);return{prev:t.filter(":lt("+i+")"),following:t.filter(":gt("+i+")")}},changePosition:function(t,e,i,n,s){t.css({top:e,left:i,position:n,zIndex:s})}}),i}()}(jQuery);